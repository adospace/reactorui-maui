{
    "Key":  "components/component-life-cycle",
    "Summary":  "Component lifecycle: Mounted, PropsChanged, WillUnmount. Understand creation, migration, and removal across renders, and where to initialize, react to prop changes, and clean up.",
    "Remarks":  "MauiReactor components form a logical tree and render via Render(). A component goes through three key lifecycle events: OnMounted() (created and added to the tree; initialize state, start async work), OnPropsChanged() (migrated in a new tree with same type; react to prop changes and update state), and OnWillUnmount() (about to be removed; unsubscribe and release resources). Lifecycle callbacks run on the UI thread—offload expensive work with async/await. A new logical tree is produced when state is invalidated (e.g., SetState or Invalidate); valid components are reused (migrated), while invalid ones are recreated or removed.",
    "Example":  "class MainPageState\r\n{\r\n    public bool Toggle { get; set; }\r\n    public int CurrentValue { get; set; }\r\n}\r\n\r\nclass MainPage : Component\u003cMainPageState\u003e\r\n{\r\n    public override VisualNode Render()\r\n    =\u003e  ContentPage(\r\n            VStack(spacing: 5,\r\n                Button($\"Use {(!State.Toggle ? \"increment\" : \"decrement\")} button\", ()=\u003e SetState(s =\u003e s.Toggle = !s.Toggle)),\r\n                State.Toggle ?\r\n                    new IncrementalCounter()\r\n                        .CurrentValue(State.CurrentValue)\r\n                        .ValueChanged(v =\u003e SetState(s =\u003e s.CurrentValue = v))\r\n                    :\r\n                    new DecrementalCounter()\r\n                        .CurrentValue(State.CurrentValue)\r\n                        .ValueChanged(v =\u003e SetState(s =\u003e s.CurrentValue = v))\r\n            )\r\n            .Center()\r\n        );\r\n}\r\n\r\npartial class IncrementalCounter : Component\r\n{ \r\n    [Prop]\r\n    int _currentValue;\r\n    [Prop]\r\n    private Action\u003cint\u003e _valueChanged;\r\n\r\n    protected override void OnMounted()\r\n    {\r\n        Debug.WriteLine(\"[IncrementalCounter] OnMounted()\");\r\n        base.OnMounted();\r\n    }\r\n\r\n    protected override void OnPropsChanged()\r\n    {\r\n        Debug.WriteLine($\"[IncrementalCounter] OnPropsChanged(_currentValue={_currentValue})\");\r\n        base.OnPropsChanged();\r\n    }\r\n\r\n    protected override void OnWillUnmount()\r\n    {\r\n        Debug.WriteLine(\"[IncrementalCounter] OnWillUnmount()\");\r\n        base.OnWillUnmount();\r\n    }\r\n\r\n    public override VisualNode Render()\r\n    {\r\n        Debug.WriteLine(\"[IncrementalCounter] Render()\");\r\n\r\n        return Button($\"Increment from {_currentValue}!\")\r\n            .OnClicked(() =\u003e _valueChanged?.Invoke(++_currentValue));\r\n    }\r\n}\r\n\r\nclass DecrementalCounter : Component\r\n{\r\n    [Prop]\r\n    int _currentValue;\r\n    [Prop]\r\n    private Action\u003cint\u003e _valueChanged;\r\n\r\n    protected override void OnMounted()\r\n    {\r\n        Debug.WriteLine(\"[DecrementalCounter] OnMounted()\");\r\n        base.OnMounted();\r\n    }\r\n\r\n    protected override void OnPropsChanged()\r\n    {\r\n        Debug.WriteLine($\"[DecrementalCounter] OnPropsChanged(_currentValue={_currentValue})\");\r\n        base.OnPropsChanged();\r\n    }\r\n\r\n    protected override void OnWillUnmount()\r\n    {\r\n        Debug.WriteLine(\"[DecrementalCounter] OnWillUnmount()\");\r\n        base.OnWillUnmount();\r\n    }\r\n\r\n    public override VisualNode Render()\r\n    {\r\n        Debug.WriteLine(\"[DecrementalCounter] Render()\");\r\n\r\n        return new Button($\"Decrement from {_currentValue}!\")\r\n            .OnClicked(() =\u003e _valueChanged?.Invoke(--_currentValue));\r\n    }\r\n}\r"
}
