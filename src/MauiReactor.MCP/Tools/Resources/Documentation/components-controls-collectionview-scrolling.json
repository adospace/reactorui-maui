{
    "Key":  "components/controls/collectionview/scrolling",
    "Summary":  "Programmatically scroll to items and observe scroll metrics via OnScrolled.",
    "Remarks":  "Use ScrollTo(index or item, position, animate) to bring items into view. Subscribe to OnScrolled to receive ItemsViewScrolledEventArgs (center item, first/last visible indexes, vertical delta/offset) and drive UI elements like sticky headers, scroll-to-top buttons, or lazy loading.",
    "Example":  "public record IndexedPersonWithAddress(int Index, string FirstName, string LastName, int Age, string Address);\r\n\r\nclass MainPageScrollingState\r\n{\r\n    public List\u003cIndexedPersonWithAddress\u003e Persons { get; set; }\r\n\r\n    public MauiControls.ItemsViewScrolledEventArgs LatestEventArgs { get; set; }\r\n\r\n    public int ScrollToIndex {  get; set; }\r\n\r\n    public MauiControls.ScrollToPosition ScrollToPosition { get; set; }\r\n\r\n    public bool IsAnimationDisabled { get; set; }\r\n}\r\n\r\nclass MainPageScrolling : Component\u003cMainPageScrollingState\u003e\r\n{\r\n    private MauiControls.CollectionView _collectionViewRef;\r\n\r\n    private static List\u003cIndexedPersonWithAddress\u003e GenerateSamplePersons(int count)\r\n    {\r\n        var random = new Random();\r\n        var firstNames = new[] { \"John\", \"Jim\", \"Joe\", \"Jack\", \"Jane\", \"Jill\", \"Jerry\", \"Jude\", \"Julia\", \"Jenny\" };\r\n        var lastNames = new[] { \"Brown\", \"Green\", \"Black\", \"White\", \"Blue\", \"Red\", \"Gray\", \"Smith\", \"Doe\", \"Jones\" };\r\n        var cities = new[] { \"New York\", \"London\", \"Sidney\", \"Tokyo\", \"Paris\", \"Berlin\", \"Mumbai\", \"Beijing\", \"Cairo\", \"Rio\" };\r\n\r\n        var persons = new List\u003cIndexedPersonWithAddress\u003e();\r\n\r\n        for (int i = 0; i \u003c count; i++)\r\n        {\r\n            var firstName = firstNames[random.Next(0, firstNames.Length)];\r\n            var lastName = lastNames[random.Next(0, lastNames.Length)];\r\n            var age = random.Next(20, 60);\r\n            var city = cities[random.Next(0, cities.Length)];\r\n            var address = $\"{city} No. {random.Next(1, 11)} Lake Park\";\r\n\r\n            persons.Add(new IndexedPersonWithAddress(i, firstName, lastName, age, address));\r\n        }\r\n\r\n        return persons;\r\n    }\r\n\r\n    protected override void OnMounted()\r\n    {\r\n        State.Persons = GenerateSamplePersons(100);\r\n        base.OnMounted();\r\n    }\r\n\r\n    public override VisualNode Render()\r\n    {\r\n        return new ContentPage\r\n        {\r\n            new Grid(\"Auto, Auto,*\", \"*\")\r\n            {\r\n                new VStack(spacing: 5)\r\n                {\r\n                    new Label($\"CenterItemIndex: {State.LatestEventArgs?.CenterItemIndex}\"),\r\n                    new Label($\"LastVisibleItemIndex: {State.LatestEventArgs?.LastVisibleItemIndex}\"),\r\n                    new Label($\"FirstVisibleItemIndex: {State.LatestEventArgs?.FirstVisibleItemIndex}\"),\r\n                    new Label($\"VerticalDelta: {State.LatestEventArgs?.VerticalDelta}\"),\r\n                    new Label($\"VerticalOffset: {State.LatestEventArgs?.VerticalOffset}\"),\r\n                },\r\n\r\n                new VStack(spacing: 5)\r\n                {\r\n                    new Entry()\r\n                        .Keyboard(Keyboard.Numeric)\r\n                        .OnTextChanged(_ =\u003e\r\n                        {\r\n                            if (int.TryParse(_, out var scrollToIndex) \u0026\u0026\r\n                                scrollToIndex \u003e= 0 \u0026\u0026\r\n                                scrollToIndex \u003c State.Persons.Count)\r\n                            {\r\n                                SetState(s =\u003e s.ScrollToIndex = scrollToIndex);\r\n                            }\r\n                        }),\r\n\r\n                    new Picker()\r\n                        .ItemsSource(Enum.GetValues\u003cMauiControls.ScrollToPosition\u003e().Select(_=\u003e_.ToString()).ToArray())\r\n                        .OnSelectedIndexChanged(index =\u003e SetState(s =\u003e s.ScrollToPosition = (MauiControls.ScrollToPosition)index)),                        \r\n\r\n                    new HStack(spacing: 5)\r\n                    {\r\n                        new CheckBox()\r\n                            .OnCheckedChanged((sender, args) =\u003e SetState(s =\u003e s.IsAnimationDisabled = args.Value)),\r\n\r\n                        new Label(\"Disable animation\")\r\n                            .HFill()\r\n                            .VCenter(),\r\n                    },\r\n\r\n                    new Button(\"Scroll To\")\r\n                        .OnClicked(()=\u003e _collectionViewRef?.ScrollTo(State.ScrollToIndex, position: State.ScrollToPosition, animate: !State.IsAnimationDisabled))\r\n                }\r\n                .GridRow(1),\r\n\r\n                new CollectionView(collectionViewRef =\u003e _collectionViewRef = collectionViewRef)\r\n                    .ItemsSource(State.Persons, RenderPerson)\r\n                    .GridRow(2)\r\n                    .OnScrolled(OnScrolled)\r\n            }\r\n        };\r\n    }\r\n\r\n    private void OnScrolled(object sender, MauiControls.ItemsViewScrolledEventArgs args)\r\n    {\r\n        SetState(s =\u003e s.LatestEventArgs = args);\r\n    }\r\n\r\n    private VisualNode RenderPerson(IndexedPersonWithAddress person)\r\n    {\r\n        return new VStack(spacing: 5)\r\n        {\r\n            new Label($\"{person.Index}. {person.FirstName} {person.LastName} ({person.Age})\"),\r\n            new Label(person.Address)\r\n                .FontSize(12)\r\n        }\r\n        .HeightRequest(56)\r\n        .VCenter();\r\n    }\r\n}\r\n\r"
}
